[
  {
    "path": "posts/2021-07-22-wicked-salmon/",
    "title": "Wicked Salmon",
    "description": "Decreasing of salmon population in wild habitat are cause by over fishing and developed on the river stream such as a dam. Because salmons are Anadromous they are swiming against the river flow from the ocean and back to the freshwater for spawning.",
    "author": [
      {
        "name": "Fajar Nugroho",
        "url": "https://fajardwnugroho.com/"
      }
    ],
    "date": "2021-07-22",
    "categories": [
      "R",
      "Data Analysis",
      "Fisheries"
    ],
    "contents": "\n1. Intro\n1.1 Greetings\nHelo, Welcome to My Rmd In this Rmd I would explore a little bit about salmon.\n1.2 Brief\nData source is from FAO. There are a lot of species, however Im only need a commercial salmon species. I wont to know about the source, which country? and what the metodologi used to harvest salmon?\n1.3 Problem Background\nDecreasing of salmon population in wild habitat are cause by over fishing and developed on the river stream such as a dam. Because salmons are Anadromous they are swiming against the river flow from the ocean and back to the freshwater for spawning.\n1.4 Library\n\n\nlibrary(readr)\nlibrary(readxl)\n\n\n\n1.5 Dataset\n\n\nfish <- read_csv(\"input_fish/TS_FI_PRODUCTION.csv\")\nspecies <- read_csv(\"input_fish/CL_FI_SPECIES_GROUPS.csv\")\ncountry <- read_csv(\"input_fish/CL_FI_COUNTRY_GROUPS.csv\")\nsource <- read_csv(\"input_fish/CL_FI_PRODUCTION_SOURCE.csv\")\nnote <- read_xlsx(\"input_fish/DSD_FI_PRODUCTION.xlsx\")\n\n\n\n2. Data Preparation\n2.1 Subset Columns & Rows\nI only chose 7 species of salmon and for column I chose Country, Source, Species, Year, and Quantity\n\n\nsalmon <- fish[ fish$SPECIES %in% c(\"SAL\", \"CHI\", \"CHU\", \"COH\", \"CHE\", \"PIN\", \"SOC\") , \n                                  c(\"COUNTRY\", \"SOURCE\", \"SPECIES\", \"YEAR\", \"QUANTITY\")]\n\n\n\nand then assign to the salmon data frame\n2.2 Check the Data\n2.2.1 Check structure data\n\n\nstr(salmon)\n\n\ntibble [6,724 × 5] (S3: tbl_df/tbl/data.frame)\n $ COUNTRY : num [1:6724] 643 643 643 643 643 643 643 643 643 643 ...\n $ SOURCE  : num [1:6724] 4 4 4 4 4 4 4 4 4 4 ...\n $ SPECIES : chr [1:6724] \"SAL\" \"CHE\" \"CHE\" \"CHE\" ...\n $ YEAR    : num [1:6724] 1988 1995 1994 1993 1992 ...\n $ QUANTITY: num [1:6724] 89 4 4 0 0 0 0 0 0 381 ...\n - attr(*, \"problems\")= tibble [29,277 × 5] (S3: tbl_df/tbl/data.frame)\n  ..$ row     : int [1:29277] 8277 8278 8279 8280 8281 8282 8283 8284 8285 8286 ...\n  ..$ col     : chr [1:29277] \"UNIT\" \"UNIT\" \"UNIT\" \"UNIT\" ...\n  ..$ expected: chr [1:29277] \"1/0/T/F/TRUE/FALSE\" \"1/0/T/F/TRUE/FALSE\" \"1/0/T/F/TRUE/FALSE\" \"1/0/T/F/TRUE/FALSE\" ...\n  ..$ actual  : chr [1:29277] \"no\" \"no\" \"no\" \"no\" ...\n  ..$ file    : chr [1:29277] \"'input_fish/TS_FI_PRODUCTION.csv'\" \"'input_fish/TS_FI_PRODUCTION.csv'\" \"'input_fish/TS_FI_PRODUCTION.csv'\" \"'input_fish/TS_FI_PRODUCTION.csv'\" ...\n\n2.2.2 Cek Missing data\n\n\ncolSums(is.na(salmon))\n\n\n COUNTRY   SOURCE  SPECIES     YEAR QUANTITY \n       0        0        0        0        0 \n\nThere is no missing data in salmon data frame\n2.3 Convert Data\n2.3.1 Convert country code to country name\nCheck country code\n\n\nunique(salmon$COUNTRY)\n\n\n [1] 643 410 666 840 724 810 752 124 152 208 233 234 250 246 276 304\n[17] 352 372 833 392 428 440 528 554 578 616 620 826 300 408 196  36\n[33] 792 376 100\n\nInterpret county code\n\n\nnegara <- country [ country$UN_Code %in% c(\"643\", \"410\", \"666\", \"840\", \"724\", \n                                           \"810\", \"752\", \"124\", \"152\", \"208\", \n                                           \"233\", \"234\", \"250\", \"246\", \"276\", \n                                           \"304\", \"352\", \"372\", \"833\", \"392\", \n                                           \"428\", \"440\", \"528\", \"554\", \"578\", \n                                           \"616\", \"620\", \"826\", \"300\", \"408\", \n                                           \"196\",  \"36\", \"792\", \"376\", \"100\") , ]\nnegara$Name_En\n\n\n [1] \"Bulgaria\"                 \"Canada\"                  \n [3] \"Chile\"                    \"Cyprus\"                  \n [5] \"Denmark\"                  \"Estonia\"                 \n [7] \"Faroe Islands\"            \"Finland\"                 \n [9] \"France\"                   \"Germany\"                 \n[11] \"Greece\"                   \"Greenland\"               \n[13] \"Iceland\"                  \"Ireland\"                 \n[15] \"Israel\"                   \"Japan\"                   \n[17] \"Korea, Dem. People's Rep\" \"Korea, Republic of\"      \n[19] \"Latvia\"                   \"Lithuania\"               \n[21] \"Netherlands\"              \"New Zealand\"             \n[23] \"Norway\"                   \"Poland\"                  \n[25] \"Portugal\"                 \"Russian Federation\"      \n[27] \"St. Pierre and Miquelon\"  \"Spain\"                   \n[29] \"Sweden\"                   \"Turkey\"                  \n[31] \"Un. Sov. Soc. Rep.\"       \"United Kingdom\"          \n[33] \"Isle of Man\"              \"United States of America\"\n\nThere are 34 countries in salmon data frame, however according to the FAO there are only 14 countries that contribute to the global salmon trade, So I just convert 14 countries to the salmon data frame.\n\n\nsalmon$COUNTRY[salmon$COUNTRY==\"578\"]<-\"Norway\"\nsalmon$COUNTRY[salmon$COUNTRY==\"152\"]<-\"Chile\"\nsalmon$COUNTRY[salmon$COUNTRY==\"752\"]<-\"Sweden\"\nsalmon$COUNTRY[salmon$COUNTRY==\"208\"]<-\"Denmark\"\nsalmon$COUNTRY[salmon$COUNTRY==\"616\"]<-\"Poland\"\nsalmon$COUNTRY[salmon$COUNTRY==\"826\"]<-\"United Kingdom\"\nsalmon$COUNTRY[salmon$COUNTRY==\"840\"]<-\"United States of America\"\nsalmon$COUNTRY[salmon$COUNTRY==\"124\"]<-\"Canada\"\nsalmon$COUNTRY[salmon$COUNTRY==\"250\"]<-\"France\"\nsalmon$COUNTRY[salmon$COUNTRY==\"276\"]<-\"Germany\"\nsalmon$COUNTRY[salmon$COUNTRY==\"528\"]<-\"Netherlands\"\nsalmon$COUNTRY[salmon$COUNTRY==\"392\"]<-\"Japan\"\nsalmon$COUNTRY[salmon$COUNTRY==\"724\"]<-\"Spain\"\nsalmon$COUNTRY[salmon$COUNTRY==\"643\"]<-\"Russian Federation\"\n\n\nunique(salmon$COUNTRY)\n\n\n [1] \"Russian Federation\"       \"410\"                     \n [3] \"666\"                      \"United States of America\"\n [5] \"Spain\"                    \"810\"                     \n [7] \"Sweden\"                   \"Canada\"                  \n [9] \"Chile\"                    \"Denmark\"                 \n[11] \"233\"                      \"234\"                     \n[13] \"France\"                   \"246\"                     \n[15] \"Germany\"                  \"304\"                     \n[17] \"352\"                      \"372\"                     \n[19] \"833\"                      \"Japan\"                   \n[21] \"428\"                      \"440\"                     \n[23] \"Netherlands\"              \"554\"                     \n[25] \"Norway\"                   \"Poland\"                  \n[27] \"620\"                      \"United Kingdom\"          \n[29] \"300\"                      \"408\"                     \n[31] \"196\"                      \"36\"                      \n[33] \"792\"                      \"376\"                     \n[35] \"100\"                     \n\nSubset 14 countires\n\n\nsalmon <- salmon[ salmon$COUNTRY %in% c(\"Norway\", \"Chile\", \"Sweden\", \"Denmark\", \"Poland\", \n                                        \"United Kingdom\", \"United States of America\", \"Canada\", \n                                        \"France\", \"Germany\", \"Netherlands\", \"Japan\", \"Spain\", \n                                        \"Russian Federation\") , ]\n\nunique(salmon$COUNTRY)\n\n\n [1] \"Russian Federation\"       \"United States of America\"\n [3] \"Spain\"                    \"Sweden\"                  \n [5] \"Canada\"                   \"Chile\"                   \n [7] \"Denmark\"                  \"France\"                  \n [9] \"Germany\"                  \"Japan\"                   \n[11] \"Netherlands\"              \"Norway\"                  \n[13] \"Poland\"                   \"United Kingdom\"          \n\n2.3.2 Convert code of source to source name\nInterpret code of source\n\n\nsource\n\n\n# A tibble: 5 x 5\n  Identifier Code     Name_En         Name_Fr          Name_Es        \n       <dbl> <chr>    <chr>           <chr>            <chr>          \n1          5 AQUACUL… Aquaculture pr… Production de l… Producción de …\n2          1 FRESHWA… Aquaculture pr… Production de l… Producción de …\n3          2 BRACKIS… Aquaculture pr… Production de l… Producción de …\n4          3 MARINE   Aquaculture pr… Production de l… Producción de …\n5          4 CAPTURE  Capture produc… Captures         Capturas       \n\nCheck code of source on salmon data frame\n\n\nunique(salmon$SOURCE)\n\n\n[1] 4 1 3\n\nThere are only 3 of 5 source in the salmon data frame So now convert the code to the name\n\n\nsalmon$SOURCE[salmon$SOURCE==\"1\"]<-\"Freshwater Aquaculture\"\nsalmon$SOURCE[salmon$SOURCE==\"3\"]<-\"Marine Aquaculture\"\nsalmon$SOURCE[salmon$SOURCE==\"4\"]<-\"Capture Fishery\"\n\nunique(salmon$SOURCE)\n\n\n[1] \"Capture Fishery\"        \"Freshwater Aquaculture\"\n[3] \"Marine Aquaculture\"    \n\n2.3.3 Convert species code to species name in english\nInterpret species code\n\n\nSpesies <- species[ species$\"3Alpha_Code\" %in% c(\"SAL\", \"CHI\", \"CHU\", \"COH\", \"CHE\", \"PIN\", \"SOC\") , ]\n\n\n\nconvert the code to spacies name\n\n\nsalmon$SPECIES[salmon$SPECIES==\"SAL\"]<-\"Atlantic Salmon\"\nsalmon$SPECIES[salmon$SPECIES==\"PIN\"]<-\"Humpback Salmon\"\nsalmon$SPECIES[salmon$SPECIES==\"CHU\"]<-\"Keta Salmon\"\nsalmon$SPECIES[salmon$SPECIES==\"CHE\"]<-\"Cherry Salmon\"\nsalmon$SPECIES[salmon$SPECIES==\"SOC\"]<-\"Red Salmon\"\nsalmon$SPECIES[salmon$SPECIES==\"CHI\"]<-\"King Salmon\"\nsalmon$SPECIES[salmon$SPECIES==\"COH\"]<-\"Silver Salmon\"\n\nunique(salmon$SPECIES)\n\n\n[1] \"Atlantic Salmon\" \"Cherry Salmon\"   \"Red Salmon\"     \n[4] \"King Salmon\"     \"Silver Salmon\"   \"Keta Salmon\"    \n[7] \"Humpback Salmon\"\n\n2.3.4 Character to factor\n\n\nsalmon$COUNTRY <- as.factor(salmon$COUNTRY)\nsalmon$SOURCE <- as.factor(salmon$SOURCE)\nsalmon$SPECIES <- as.factor(salmon$SPECIES)\nsalmon$YEAR <- as.factor(salmon$YEAR)\n\n\n\nIm just need year at 2018 so, i subset it\n\n\nsalmon <- salmon[ salmon$YEAR == 2018, ]\nsalmon <- salmon[ , c(\"COUNTRY\", \"SOURCE\", \"SPECIES\", \"QUANTITY\")]\n\n\n\nNow the data is ready to explore\n3 Data Exploratory and Explanatory\n3.1 Most popular species\n\n\nsalmon_species <- as.data.frame(sort(prop.table(table(droplevels(salmon[ , \"SPECIES\" ]))), \n                                     decreasing = T))\nnames(salmon_species)[1] <- paste(\"Salmon Species\")\nhead(salmon_species, 3)\n\n\n   Salmon Species      Freq\n1 Atlantic Salmon 0.4393939\n2 Humpback Salmon 0.1212121\n3   Silver Salmon 0.1212121\n\nOk this is the top 3 of the most popular salmon\nI try to make a pie chart\n\n\ngraphics::pie(xtabs(~ SPECIES, salmon))\n\n\n\n\n3.2 Where they came from\nFirst, Atlantic Salmon\n\n\nAtlantic_Salmon_Source <- as.data.frame(sort(prop.table(table(droplevels(salmon[salmon$SPECIES == \"Atlantic Salmon\",\"SOURCE\"]))),decreasing = T))\nnames(Atlantic_Salmon_Source)[1] <- paste(\"Atlantic Salmon\")\nAtlantic_Salmon_Source\n\n\n         Atlantic Salmon      Freq\n1        Capture Fishery 0.6206897\n2     Marine Aquaculture 0.2758621\n3 Freshwater Aquaculture 0.1034483\n\nSo capture fisheries practice is still being carried out, even though this species is already under threat\nSecond, Humpback Salmon\n\n\nHumpback_Salmon_Source <- as.data.frame(sort(prop.table(table(droplevels(salmon[salmon$SPECIES == \"Humpback Salmon\",\"SOURCE\"]))),decreasing = T))\nnames(Humpback_Salmon_Source)[1] <- paste(\"Humpback Salmon\")\nHumpback_Salmon_Source\n\n\n     Humpback Salmon  Freq\n1    Capture Fishery 0.875\n2 Marine Aquaculture 0.125\n\nThird, Silver Salmon\n\n\nSilver_Salmon_Source <- as.data.frame(sort(prop.table(table(droplevels(salmon[salmon$SPECIES == \"Silver Salmon\",\"SOURCE\"]))),decreasing = T))\nnames(Silver_Salmon_Source)[1] <- paste(\"Silver  Salmon\")\nSilver_Salmon_Source\n\n\n          Silver  Salmon  Freq\n1        Capture Fishery 0.625\n2     Marine Aquaculture 0.250\n3 Freshwater Aquaculture 0.125\n\nFrom three species above, the conclusion is capture fisheries still dominate the output of production.\n3.3 Aquaculture\nI am curious, what species are cultivated? Start from Freshwater Aquaculture\n\n\nFreshwater_Aquaculture <- as.data.frame(sort(table(droplevels(salmon[salmon$SOURCE == \"Freshwater Aquaculture\",\n                                                                     \"SPECIES\"]))),decreasing = T)\nnames(Freshwater_Aquaculture)[1] <- paste(\"Freshwater Aquaculture\")\nFreshwater_Aquaculture\n\n\n  Freshwater Aquaculture Freq\n1            Keta Salmon    1\n2          Silver Salmon    1\n3        Atlantic Salmon    3\n\nOk now from Marine Aquaculture\n\n\nMarine_Aquaculture <- as.data.frame(sort(table(droplevels(salmon[salmon$SOURCE == \"Marine Aquaculture\",\n                                                                 \"SPECIES\"]))),decreasing = T)\nnames(Marine_Aquaculture)[1] <- paste(\"Marine Aquaculture\")\nMarine_Aquaculture\n\n\n  Marine Aquaculture Freq\n1    Humpback Salmon    1\n2      Silver Salmon    2\n3    Atlantic Salmon    8\n\nSo based on the data above, not only top three species, but keta salmon is also cultivated\n3.4 Country and cultivation\nwhich countries did cultivation? From Freshwater Aquaculture First\n\n\nCountry_Freshwater_Aquaculture <- as.data.frame(sort(table(droplevels(salmon[salmon$SOURCE == \"Freshwater Aquaculture\" , \"COUNTRY\"]))),decreasing = T)\nnames(Country_Freshwater_Aquaculture)[1] <- paste(\"Freshwater Aquaculture\")\nCountry_Freshwater_Aquaculture\n\n\n  Freshwater Aquaculture Freq\n1                Denmark    1\n2                  Chile    2\n3     Russian Federation    2\n\nAnd then Marine Aquaculture\n\n\nCountry_Marine_Aquaculture <- as.data.frame(sort(table(droplevels(salmon[salmon$SOURCE == \"Marine Aquaculture\" , \"COUNTRY\"]))),decreasing = T)\nnames(Country_Marine_Aquaculture)[1] <- paste(\"Marine Aquaculture\")\nCountry_Marine_Aquaculture\n\n\n        Marine Aquaculture Freq\n1                   France    1\n2                    Japan    1\n3                   Norway    1\n4           United Kingdom    1\n5 United States of America    1\n6                   Canada    2\n7                    Chile    2\n8       Russian Federation    2\n\nOnly Chile and Russia did both cultivation, however how about the production results?\nBefore that I need to aggregate\n\n\nsalmon_country_agg <- aggregate(QUANTITY ~ COUNTRY + SOURCE , salmon , sum)\n\n\n\n\n\nfresh_aquaculture_country <- salmon_country_agg[ salmon_country_agg$SOURCE == \"Freshwater Aquaculture\", ]\nfresh_aquaculture_country\n\n\n              COUNTRY                 SOURCE QUANTITY\n13              Chile Freshwater Aquaculture   683.38\n14            Denmark Freshwater Aquaculture  1030.00\n15 Russian Federation Freshwater Aquaculture     0.00\n\nI was surprised, it turned out that Russia did not produce Freshwater Aquaculture in 2018\n\n\nmarine_aquaculture_country <- salmon_country_agg[ salmon_country_agg$SOURCE == \"Marine Aquaculture\", ]\nmarine_aquaculture_country_sorted <- marine_aquaculture_country[order(-marine_aquaculture_country$QUANTITY, marine_aquaculture_country$COUNTRY),]\nmarine_aquaculture_country_sorted\n\n\n                    COUNTRY             SOURCE  QUANTITY\n20                   Norway Marine Aquaculture 1282003.2\n17                    Chile Marine Aquaculture  808975.8\n22           United Kingdom Marine Aquaculture  166000.0\n16                   Canada Marine Aquaculture  123184.0\n21       Russian Federation Marine Aquaculture   20632.0\n19                    Japan Marine Aquaculture   18000.0\n23 United States of America Marine Aquaculture   16107.0\n18                   France Marine Aquaculture     300.0\n\n\n\ngraphics::barplot(xtabs(QUANTITY ~ COUNTRY,marine_aquaculture_country_sorted))\n\n\n\n\nas well known Norway definitely the highest of Salmon production in Marine Aquaculture\n4. Conclusion\nSo it is actually not easy to cultivate salmon, but the positive thing is that many technologies have been developed to cultivate salmon. Cultivation is also not always positive, the cons is that production costs are too expensive. My assumptions, an easy solution to keep the population of salmon still sustainable is to limit the catch by weight or by fishing season, and improve the technologies for Aquaculture to make the cost is cheaper. I think that is enough, thanks for reading my Rmd.\n5. Reference\nhttp://www.fao.org/fishery/statistics/global-production/en  Cover photo by Marcos Paulo Prado on Unsplash  This article also available on Medium and Rpubs\n\n\n\n",
    "preview": "posts/2021-07-22-wicked-salmon/images/marcos-paulo-prado-B1ZnmSB7htg-unsplash.jpg",
    "last_modified": "2021-07-31T22:41:29+07:00",
    "input_file": "Wicked-Salmon.knit.md"
  }
]
